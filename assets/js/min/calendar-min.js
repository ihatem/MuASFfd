function add_rounddate_week(){$(".dd").removeClass("round-date");for(var e=!1,t=1;t<=7&&e===!1;){var d=new XDate(parseInt($(".days-row td:nth-child("+t+")").attr("date-sem-value")));tdy.toString("dd MMMM yyyy")===d.toString("dd MMMM yyyy")?($(".days-row td:nth-child("+t+") .dd ").addClass("round-date"),e=!0):t++}}function add_rounddate_mon(){$("span").removeClass("round-date");for(var e=!1,t=1,d=2,a=1;t<=42&&e===!1;){var s=new XDate(parseInt($("#table-mon tr:nth-child("+d+") td:nth-child("+a+")").attr("date-value")));s.toString("dd MMMM yyyy")===tdy.toString("dd MMMM yyyy")?($("#table-mon tr:nth-child("+d+") td:nth-child("+a+") span").addClass("round-date"),e=!0):a>7?(a=1,d++):(a++,t++)}}function get_rdv_date(e){return 0===$(".dispo-active").index()?e=monday.clone():1===$(".dispo-active").index()?e=tuesday.clone():2===$(".dispo-active").index()?e=wednesday.clone():3===$(".dispo-active").index()?e=thursday.clone():4===$(".dispo-active").index()&&(e=friday.clone()),e}function month_check_prec(){for(var e=new XDate(parseInt($(".mois-p-sem").attr("sem-mois-value"))),t=!1,d=1;d<=7&&t===!1;){var a=new XDate(parseInt($(".days-row td:nth-child("+d+")").attr("date-sem-value")));a.getMonth()<e.getMonth()?($(".mois-p-sem").text(a.toString("MMMM")),$(".mois-p-sem").append("&nbsp;"),$(".annee-p-sem").text(a.toString("yyyy")),$(".mois-p-sem").attr("sem-mois-value",a),$(".annee-p-sem").attr("sem-annee-value",a),t=!0):d++}}function month_check_suiv(){for(var e=new XDate(parseInt($(".mois-p-sem").attr("sem-mois-value"))),t=!1,d=1;d<=7&&t===!1;){var a=new XDate(parseInt($(".days-row td:nth-child("+d+")").attr("date-sem-value")));a.getMonth()>e.getMonth()?($(".mois-p-sem").text(a.toString("MMMM")),$(".mois-p-sem").append("&nbsp;"),$(".annee-p-sem").text(a.toString("yyyy")),$(".mois-p-sem").attr("sem-mois-value",a),$(".annee-p-sem").attr("sem-annee-value",a),t=!0):d++}}function set_today(){1===tdy.getDay()?(monday=tdy.clone(),tuesday=tdy.clone().addDays(1),wednesday=tdy.clone().addDays(2),thursday=tdy.clone().addDays(3),friday=tdy.clone().addDays(4),saturday=tdy.clone().addDays(5),sunday=tdy.clone().addDays(6)):2===tdy.getDay()?(monday=tdy.clone().addDays(-1),tuesday=tdy.clone(),wednesday=tdy.clone().addDays(1),thursday=tdy.clone().addDays(2),friday=tdy.clone().addDays(3),saturday=tdy.clone().addDays(4),sunday=tdy.clone().addDays(5)):3===tdy.getDay()?(monday=tdy.clone().addDays(-2),tuesday=tdy.clone().addDays(-1),wednesday=tdy.clone(),thursday=tdy.clone().addDays(1),friday=tdy.clone().addDays(2),saturday=tdy.clone().addDays(3),sunday=tdy.clone().addDays(4)):4===tdy.getDay()?(monday=tdy.clone().addDays(-3),tuesday=tdy.clone().addDays(-2),wednesday=tdy.clone().addDays(-1),thursday=tdy.clone(),friday=tdy.clone().addDays(1),saturday=tdy.clone().addDays(2),sunday=tdy.clone().addDays(3)):5===tdy.getDay()?(monday=tdy.clone().addDays(-4),tuesday=tdy.clone().addDays(-3),wednesday=tdy.clone().addDays(-2),thursday=tdy.clone().addDays(-1),friday=tdy.clone(),saturday=tdy.clone().addDays(1),sunday=tdy.clone().addDays(2)):6===tdy.getDay()?(monday=tdy.clone().addDays(-5),tuesday=tdy.clone().addDays(-4),wednesday=tdy.clone().addDays(-3),thursday=tdy.clone().addDays(-2),friday=tdy.clone().addDays(-1),saturday=tdy.clone(),sunday=tdy.clone().addDays(1)):0===tdy.getDay()&&(monday=tdy.clone().addDays(-6),tuesday=tdy.clone().addDays(-5),wednesday=tdy.clone().addDays(-4),thursday=tdy.clone().addDays(-3),friday=tdy.clone().addDays(-2),saturday=tdy.clone().addDays(-1),sunday=tdy.clone()),$(".lundi > .dd").text(monday.toUTCString("dd")),$(".lundi").attr("date-sem-value",monday),$(".mardi > .dd").text(tuesday.toUTCString("dd")),$(".mardi").attr("date-sem-value",tuesday),$(".mercredi > .dd").text(wednesday.toUTCString("dd")),$(".mercredi").attr("date-sem-value",wednesday),$(".jeudi > .dd").text(thursday.toUTCString("dd")),$(".jeudi").attr("date-sem-value",thursday),$(".vendredi > .dd").text(friday.toUTCString("dd")),$(".vendredi").attr("date-sem-value",friday),$(".samedi > .dd").text(saturday.toUTCString("dd")),$(".samedi").attr("date-sem-value",saturday),$(".dimanche > .dd").text(sunday.toUTCString("dd")),$(".dimanche").attr("date-sem-value",sunday),$(".mois-p-sem").text(tdy.clone().toString("MMMM")),$(".mois-p-sem").append("&nbsp;"),$(".annee-p-sem").text(tdy.clone().toString("yyyy")),$(".mois-p-sem").attr("sem-mois-value",tdy.clone()),$(".annee-p-sem").attr("sem-annee-value",tdy.clone())}function set_suiv(){monday=sunday.clone().addDays(1),tuesday=monday.clone().addDays(1),wednesday=tuesday.clone().addDays(1),thursday=wednesday.clone().addDays(1),friday=thursday.clone().addDays(1),saturday=friday.clone().addDays(1),sunday=saturday.clone().addDays(1),$(".lundi > .dd").text(monday.toUTCString("dd")),$(".lundi").attr("date-sem-value",monday),$(".mardi > .dd").text(tuesday.toUTCString("dd")),$(".mardi").attr("date-sem-value",tuesday),$(".mercredi > .dd").text(wednesday.toUTCString("dd")),$(".mercredi").attr("date-sem-value",wednesday),$(".jeudi > .dd").text(thursday.toUTCString("dd")),$(".jeudi").attr("date-sem-value",thursday),$(".vendredi > .dd").text(friday.toUTCString("dd")),$(".vendredi").attr("date-sem-value",friday),$(".samedi > .dd").text(saturday.toUTCString("dd")),$(".samedi").attr("date-sem-value",saturday),$(".dimanche > .dd").text(sunday.toUTCString("dd")),$(".dimanche").attr("date-sem-value",sunday),$(".dispo-active").removeClass("dispo-active"),0!==monday.diffDays(date_selected)&&0!==tuesday.diffDays(date_selected)&&0!==wednesday.diffDays(date_selected)&&0!==thursday.diffDays(date_selected)&&0!==friday.diffDays(date_selected)||$("#table-week tr:nth-child("+tr_index+") td:nth-child("+td_index+")").addClass("dispo-active")}function set_prec(){sunday=monday.clone().addDays(-1),saturday=sunday.clone().addDays(-1),friday=saturday.clone().addDays(-1),thursday=friday.clone().addDays(-1),wednesday=thursday.clone().addDays(-1),tuesday=wednesday.clone().addDays(-1),monday=tuesday.clone().addDays(-1),$(".lundi > .dd").text(monday.toUTCString("dd")),$(".lundi").attr("date-sem-value",monday),$(".mardi > .dd").text(tuesday.toUTCString("dd")),$(".mardi").attr("date-sem-value",tuesday),$(".mercredi > .dd").text(wednesday.toUTCString("dd")),$(".mercredi").attr("date-sem-value",wednesday),$(".jeudi > .dd").text(thursday.toUTCString("dd")),$(".jeudi").attr("date-sem-value",thursday),$(".vendredi > .dd").text(friday.toUTCString("dd")),$(".vendredi").attr("date-sem-value",friday),$(".samedi > .dd").text(saturday.toUTCString("dd")),$(".samedi").attr("date-sem-value",saturday),$(".dimanche > .dd").text(sunday.toUTCString("dd")),$(".dimanche").attr("date-sem-value",sunday),$(".dispo-active").removeClass("dispo-active"),0!==monday.diffDays(date_selected)&&0!==tuesday.diffDays(date_selected)&&0!==wednesday.diffDays(date_selected)&&0!==thursday.diffDays(date_selected)&&0!==friday.diffDays(date_selected)||$("#table-week tr:nth-child("+tr_index+") td:nth-child("+td_index+")").addClass("dispo-active")}function fill_table(){var e=currentDate.clone().getDay();0===tdn&&(tdn=7),0===e&&(e=7);for(var t=0;t<=42-e;t++)$("#table-mon tr:nth-child("+trn+") td:nth-child("+tdn+") span").text(currentDate.toString("dd")),$("#table-mon tr:nth-child("+trn+") td:nth-child("+tdn+")").attr("date-value",currentDate),1===currentDate.getDate()&&$("#table-mon tr:nth-child("+trn+") td:nth-child("+tdn+") span").append(" "+currentDate.toString("MMM")+"."),tdn++,currentDate.addDays(1),tdn>7&&(tdn=1,trn++),currentDate.getDate()>new XDate(currentDate.getFullYear(),currentDate.getMonth()+1,0).getDate()&&currentDate.addMonths(1);trn=7,tdn=7;var d=parseInt($("#table-mon tr:nth-child(7) td:nth-child(7) span").text())+1;for($(".td-mon span").removeClass("grayed"),t=1;t<d;t++)$("#table-mon tr:nth-child("+trn+") td:nth-child("+tdn+") span").addClass("grayed"),tdn--,tdn<1&&(tdn=7,trn--);var a=currentDate.clone();for(a.setDate(1),a.addMonths(-1),a.addDays(-1),0===e&&(e=7),t=e-1;t>0;t--)$("#table-mon tr:nth-child(2) td:nth-child("+t+") span").text(a.toString("dd")),$("#table-mon tr:nth-child(2) td:nth-child("+t+") span").addClass("grayed"),$("#table-mon tr:nth-child(2) td:nth-child("+t+")").attr("date-value",currentDate),a.addDays(-1);for(t=1;t<=7;t++)$("#table-mon tr:nth-child(2) td:nth-child("+t+") span").text().match("^01")&&(temptest=new XDate(parseInt($("#table-mon tr:nth-child(2) td:nth-child("+t+")").attr("date-value"))),$(".mois-p-mon").text(temptest.toString("MMMM")),$(".mois-p-mon").append("&nbsp;"),$(".annee-p-mon").text(temptest.toString("yyyy")))}var tdy=new XDate(!0),monday,tuesday,wednesday,thursday,friday,saturday,sunday,rdv_date,tr_index,td_index,td_value,date_selected,temptest,index_first_day;console.log("Hello World"),$(".td-week").watch({properties:"prop_innerHTML",callback:function(){switch($(".dispo-active").index()){case 0:date_selected=monday.clone();break;case 1:date_selected=tuesday.clone();break;case 2:date_selected=wednesday.clone();break;case 3:date_selected=thursday.clone();break;case 4:date_selected=friday.clone()}switch(0===$(".dispo-active").index()?(rdv_date=monday.clone(),td_index=1):1===$(".dispo-active").index()?(rdv_date=tuesday.clone(),td_index=2):2===$(".dispo-active").index()?(rdv_date=wednesday.clone(),td_index=3):3===$(".dispo-active").index()?(rdv_date=thursday.clone(),td_index=4):4===$(".dispo-active").index()&&(rdv_date=friday.clone(),td_index=5),td_value=$(".dispo-active").text()){case"10:00":tr_index=2;break;case"10:30":tr_index=3;break;case"11:00":tr_index=4;break;case"11:30":tr_index=5;break;case"12:00":tr_index=6;break;case"13:30":tr_index=7;break;case"14:00":tr_index=8;break;case"14:30":tr_index=9;break;case"15:00":tr_index=10;break;case"15:30":tr_index=11;break;case"16:00":tr_index=12;break;case"16:30":tr_index=13;break;case"17:00":tr_index=14;break;default:td_index=-1}}}),set_today(),add_rounddate_week(),$(".sem-ajd-sem").click(function(){set_today(),add_rounddate_week()}),$(".sem-suiv-sem").click(function(){set_suiv(),month_check_suiv(),add_rounddate_week()}),$(".sem-prec-sem").click(function(){set_prec(),month_check_prec(),add_rounddate_week()}),$(".td-week").watch({properties:"attr_class",callback:function(){$(".rdv-time").css("opacity","1"),$(".p-date-rdv").text(get_rdv_date(rdv_date).toString("dddd")+" le "+get_rdv_date(rdv_date).toString("dd MMMM yyyy")+" à "+$("#table-week tr:nth-child("+tr_index+") td:nth-child("+td_index+")").text())}});var today=new XDate(!0),currentDate=today.clone().setDate(1),trn=2,tdn=currentDate.clone().getDay(),index_first_day;$(".semaine-mois-button > span").click(function(){if("semaine-select"===$(this).attr("class")){0===temptest.getDay()?(monday=temptest.clone().addDays(-6),tuesday=temptest.clone().addDays(-5),wednesday=temptest.clone().addDays(-4),thursday=temptest.clone().addDays(-3),friday=temptest.clone().addDays(-2),saturday=temptest.clone().addDays(-1),sunday=temptest.clone()):(monday=temptest.clone().addDays(-temptest.getDay()+1),tuesday=temptest.clone().addDays(-temptest.getDay()+2),wednesday=temptest.clone().addDays(-temptest.getDay()+3),thursday=temptest.clone().addDays(-temptest.getDay()+4),friday=temptest.clone().addDays(-temptest.getDay()+5),saturday=temptest.clone().addDays(-temptest.getDay()+6),sunday=temptest.clone().addDays(-temptest.getDay()+7)),$(".lundi > .dd").text(monday.toUTCString("dd")),$(".lundi").attr("date-sem-value",monday),$(".mardi > .dd").text(tuesday.toUTCString("dd")),$(".mardi").attr("date-sem-value",tuesday),$(".mercredi > .dd").text(wednesday.toUTCString("dd")),$(".mercredi").attr("date-sem-value",wednesday),$(".jeudi > .dd").text(thursday.toUTCString("dd")),$(".jeudi").attr("date-sem-value",thursday),$(".vendredi > .dd").text(friday.toUTCString("dd")),$(".vendredi").attr("date-sem-value",friday),$(".samedi > .dd").text(saturday.toUTCString("dd")),$(".samedi").attr("date-sem-value",saturday),$(".dimanche > .dd").text(sunday.toUTCString("dd")),$(".dimanche").attr("date-sem-value",sunday);var e=new XDate(sunday);e.setDate(1),$(".mois-p-sem").text(e.toUTCString("MMMM")),$(".mois-p-sem").append("&nbsp;"),$(".annee-p-sem").text(e.toUTCString("yyyy")),$(".mois-p-sem").attr("sem-mois-value",e),$(".annee-p-sem").attr("sem-annee-value",e),$(".semaine-select").addClass("semaine-mois-selected"),$(".mois-select").removeClass("semaine-mois-selected"),$(".semaine-wrap").css("display","block"),$(".mois-wrap").css("display","none"),add_rounddate_week()}else if("mois-select"===$(this).attr("class")){var t;$(".mois-p-sem").text().match("^Jan")?t=0:$(".mois-p-sem").text().match("^Fév")?t=1:$(".mois-p-sem").text().match("^Mar")?t=2:$(".mois-p-sem").text().match("^Avr")?t=3:$(".mois-p-sem").text().match("^Mai")?t=4:$(".mois-p-sem").text().match("^Juin")?t=5:$(".mois-p-sem").text().match("^Juill")?t=6:$(".mois-p-sem").text().match("^Ao")?t=7:$(".mois-p-sem").text().match("^Sept")?t=8:$(".mois-p-sem").text().match("^Oct")?t=9:$(".mois-p-sem").text().match("^Nov")?t=10:$(".mois-p-sem").text().match("^Déc")&&(t=11);var d=new XDate;d.setMonth(t),d.setFullYear($(".annee-p-sem").text()),currentDate=d.clone(),currentDate.setDate(1),trn=2,tdn=currentDate.clone().getDay(),index_first_day=currentDate.clone().getDay(),fill_table(),$(".mois-select").addClass("semaine-mois-selected"),$(".semaine-select").removeClass("semaine-mois-selected"),$(".mois-wrap").css("display","block"),$(".semaine-wrap").css("display","none"),add_rounddate_mon()}}),$(".sem-suiv-mon").click(function(){currentDate.setDate(1),trn=2,tdn=currentDate.clone().getDay(),index_first_day=currentDate.clone().getDay(),fill_table(),add_rounddate_mon()}),$(".sem-prec-mon").click(function(){currentDate.addMonths(-2),currentDate.setDate(1),trn=2,tdn=currentDate.clone().getDay(),index_first_day=currentDate.clone().getDay(),fill_table(),add_rounddate_mon()}),$(".sem-ajd-mon").click(function(){currentDate=today.clone(),currentDate.setDate(1),trn=2,tdn=currentDate.clone().getDay(),index_first_day=currentDate.clone().getDay(),fill_table(),add_rounddate_mon()}),$(".td-mon").click(function(){var e=new XDate(parseInt($(this).attr("date-value")));0===e.getDay()?(monday=e.clone().addDays(-6),tuesday=e.clone().addDays(-5),wednesday=e.clone().addDays(-4),thursday=e.clone().addDays(-3),friday=e.clone().addDays(-2),saturday=e.clone().addDays(-1),sunday=e.clone()):(monday=e.clone().addDays(-e.getDay()+1),tuesday=e.clone().addDays(-e.getDay()+2),wednesday=e.clone().addDays(-e.getDay()+3),thursday=e.clone().addDays(-e.getDay()+4),friday=e.clone().addDays(-e.getDay()+5),saturday=e.clone().addDays(-e.getDay()+6),sunday=e.clone().addDays(-e.getDay()+7)),$(".lundi > .dd").text(monday.toUTCString("dd")),$(".lundi").attr("date-sem-value",monday),$(".mardi > .dd").text(tuesday.toUTCString("dd")),$(".mardi").attr("date-sem-value",tuesday),$(".mercredi > .dd").text(wednesday.toUTCString("dd")),$(".mercredi").attr("date-sem-value",wednesday),$(".jeudi > .dd").text(thursday.toUTCString("dd")),$(".jeudi").attr("date-sem-value",thursday),$(".vendredi > .dd").text(friday.toUTCString("dd")),$(".vendredi").attr("date-sem-value",friday),$(".samedi > .dd").text(saturday.toUTCString("dd")),$(".samedi").attr("date-sem-value",saturday),$(".dimanche > .dd").text(sunday.toUTCString("dd")),$(".dimanche").attr("date-sem-value",sunday),$(".semaine-select").addClass("semaine-mois-selected"),$(".mois-select").removeClass("semaine-mois-selected"),$(".semaine-wrap").css("display","block"),$(".mois-wrap").css("display","none"),$(".mois-p-sem").text(sunday.toString("MMMM")),$(".mois-p-sem").append("&nbsp;"),$(".annee-p-sem").text(sunday.toString("yyyy")),add_rounddate_week()});